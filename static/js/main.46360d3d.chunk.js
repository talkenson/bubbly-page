(window.webpackJsonpbubbly=window.webpackJsonpbubbly||[]).push([[0],{110:function(e,a,t){},200:function(e,a,t){e.exports=t(321)},311:function(e,a,t){e.exports=t.p+"static/media/persik.4e1ec840.png"},312:function(e,a,t){},321:function(e,a,t){"use strict";t.r(a);t(201),t(227),t(229),t(230),t(232),t(233),t(234),t(235),t(236),t(237),t(238),t(239),t(241),t(242),t(243),t(244),t(245),t(246),t(247),t(248),t(249),t(250),t(252),t(253),t(254),t(255),t(256),t(257),t(258),t(259),t(260),t(261),t(262),t(263),t(264),t(265),t(266),t(267),t(268),t(269);var n=t(0),c=t.n(n),r=t(76),l=t.n(r),s=t(44),o=t.n(s),i=t(48),u=t.n(i),d=t(42),m=t(121),p=t.n(m),b=t(118),f=t.n(b),E=t(119),g=t.n(E),h=t(46),v=t.n(h),j=t(120),O=t.n(j),k=(t(278),t(77)),w=t.n(k),x=t(45),y=t.n(x),C=t(40),A=t.n(C),S=t(41),_=t.n(S),z=t(78),M=t.n(z),I=t(58),P=t.n(I),U=t(43),K=t.n(U),N=(t(110),function(e){var a=e.id,t=e.go,n=e.fetchedUser;e.setActiveModal;return c.a.createElement(y.a,{id:a},c.a.createElement(A.a,{className:"Panel"},"Bubbly"),n&&c.a.createElement(M.a,{title:"\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u043a\u0430\u043a"},c.a.createElement(P.a,{description:n.data?"".concat(n.first_name," ").concat(n.last_name):"\u041c\u044b \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0432\u0430\u0448\u0438 \u0434\u0430\u043d\u043d\u044b\u0435..."},"".concat(n.data?n.data.uname:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."))),c.a.createElement(M.a,{title:"\u0427\u0430\u0442\u044b"},c.a.createElement(K.a,null,c.a.createElement(_.a,{size:"xl",level:"2",onClick:t,"data-to":"chat"},c.a.createElement(P.a,{description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f"},"".concat(n&&n.data?n.data.motd:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."))))))}),V=t(79),W=t(117),B=t.n(W),D=t(115),J=t.n(D),L=t(116),G=t.n(L),T=t(47),Z=t.n(T),q=(t(311),t(312),Object(V.b)()),F=function(e){return c.a.createElement(y.a,{id:e.id},c.a.createElement(A.a,{left:c.a.createElement(B.a,{onClick:e.go,"data-to":"home"},q===V.a?c.a.createElement(J.a,null):c.a.createElement(G.a,null))},"\u0427\u0430\u0442"),c.a.createElement(v.a,null,c.a.createElement(Z.a,{placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",id:"message",onChange:function(a){e.msg=a.target.value}}),c.a.createElement(_.a,{size:"xl",level:"1",onClick:function(){console.log(e.msg)}},"\u041e\u0442\u043f\u0440.")))},H=t(57),Q=t.n(H),R=function(e){var a=e.id,t=e.logData,n=e.tryLogin,r=e.errMsg;return c.a.createElement(y.a,{id:a},c.a.createElement(A.a,{className:"Panel"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),c.a.createElement(v.a,null,c.a.createElement(Q.a,{top:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"},c.a.createElement(Z.a,{placeholder:"\u0412\u0430\u0448 \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c",id:"uname",onChange:function(e){t.name=e.target.value}}),c.a.createElement(Z.a,{placeholder:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",id:"upass",onChange:function(e){t.pass=e.target.value}})),c.a.createElement(_.a,{size:"xl",level:"2",onClick:function(){console.log(t),n(t)}},"\u0412\u043e\u0439\u0442\u0438"),c.a.createElement(K.a,null,c.a.createElement("b",null,r&&r))))},X={id:2,first_name:"\u0424\u0438\u043b\u0438\u043f\u043f \u0414\u0436\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u0438",last_name:"",timezone:7},Y=function(){var e=Object(n.useState)("home"),a=Object(d.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(null),s=Object(d.a)(l,2),i=s[0],m=s[1],b=Object(n.useState)(X),E=Object(d.a)(b,2),h=E[0],j=E[1],k=Object(n.useState)(null),x=Object(d.a)(k,2),y=x[0],C=(x[1],Object(n.useState)(null)),A=Object(d.a)(C,2),S=A[0],_=A[1],z=Object(n.useState)(),M=Object(d.a)(z,2),I=M[0],P=M[1];Object(n.useEffect)((function(){o.a.subscribe((function(e){var a=e.detail,t=a.type,n=a.data;if("VKWebAppUpdateConfig"===t){var c=document.createAttribute("scheme");c.value=n.scheme?n.scheme:"client_dark",document.body.attributes.setNamedItem(c)}})),function(){var e;u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(o.a.sendPromise("VKWebAppGetUserInfo"));case 2:return e=a.sent,j(e),a.next=6,u.a.awrap(w.a.get("https://das.ict.nsc.ru:12000/reg/"+e.id+":0:secret").then((function(a){"ok"==a.data.status?e.data=a.data.response:r("login")})));case 6:a.sent,j(e),P(null);case 9:case"end":return a.stop()}}))}()}),[]);var U=function(e){r(e.currentTarget.dataset.to)};var K=c.a.createElement(f.a,{activeModal:i},c.a.createElement(g.a,{id:"register",header:c.a.createElement(O.a,null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")},c.a.createElement(v.a,null)));return c.a.createElement(p.a,{activePanel:t,popout:I,modal:K},c.a.createElement(N,{id:"home",fetchedUser:h,go:U,setActiveModal:m}),c.a.createElement(F,{id:"chat",go:U,activeChat:y}),c.a.createElement(R,{id:"login",logData:{name:"",pass:""},tryLogin:function(e){var a;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a=h,t.next=3,u.a.awrap(w.a.get("https://das.ict.nsc.ru:12000/reg/"+a.id+":"+e.name+":"+e.pass).then((function(e){if("ok"==e.data.status)a.data=e.data.response,r("home");else{switch(console.log("Auth Error: "+e.data.desc),e.data.code){case"401":_("\u0412\u044b \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b");break;case"306":_("\u041d\u0438\u043a\u043d\u0435\u0439\u043c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0441\u0440\u0435\u0434\u0438 [A-Za-z0-9\\_\\-\\.]");break;case"302":_("\u0414\u043b\u0438\u043d\u0430 \u043d\u0438\u043a\u043d\u0435\u0439\u043c\u0430 \u0438 \u043f\u0430\u0440\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u0435\u0435 4");break;default:_("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430")}r("login")}})));case 3:t.sent,j(a),P(null);case 6:case"end":return t.stop()}}))},errMsg:S}))};o.a.send("VKWebAppInit"),l.a.render(c.a.createElement(Y,null),document.getElementById("root"))}},[[200,1,2]]]);
//# sourceMappingURL=main.46360d3d.chunk.js.map